<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<style>
	.x.axis line {
		shape-rendering: auto;
	}
	.line {
		fill: none;
		stroke: #000;
		stroke-width: 1.5px;
	}
	.axis path, .axis line {
		fill: none;
		stroke: #000;
		shape-rendering: crispEdges;
	}
	</style>
</head>
<body>
<script src="http://d3js.org/d3.v2.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>(function() {

var params = {};
var longest = 300;
var socket = io.connect( 'http://localhost' );
socket.on( 'feed', function( feed ) {
/* debug:start */
console.log( feed );
/* debug:stop */
	// parse JSON string
	try { feed = JSON.parse( feed ); }
	catch( e ) { throw Error( e ); }

	// transform feed for d3
	for ( var i in feed ) {
		for ( var j in feed[i] ) {
			if ( !params[j] ) params[j] = [];
			params[j].push({ time : i, value : feed[i][j] });
		}
	}
	// make sure params doesn't get too long
	//for ( i in params ) {
	//	if ( params[i].length > longest )
	//		params[i].splice( 0, params[i].length - longest );
	//}
});

/* debug:start */
window.params = params;
/* debug:stop */

}())</script>
	<pre id="sent-data"></pre>
</body>
</html>
